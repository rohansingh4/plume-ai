<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plume</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="plume-header">
      <div class="logo-container">
        <svg class="logo" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#6366F1"/>
              <stop offset="100%" style="stop-color:#8B5CF6"/>
            </linearGradient>
          </defs>
          <path fill="url(#logo-gradient)" d="M23 6c-2-1.5-5-1-7 1.5L9 17.5c-1 1.25-1.5 2.75-1.25 4.25l.75 3.5c.25 1.25 1.5 2.25 3 2.25h1.5l11-11c3-3 3.5-8 .5-11.5z"/>
          <path fill="#FFFFFF" opacity="0.85" d="M19.5 11c-1.5-1.5-4-2-6-.75l-4 4c-.5.5-.75 1.25-.25 1.75l2.5 2.5c.5.5 1.25.5 1.75 0l5.5-5.5c1.25-1.25 1.5-3.25.5-5z"/>
          <circle cx="21.5" cy="7.5" r="1.25" fill="#FFFFFF" opacity="0.7"/>
        </svg>
        <span class="logo-text">Plume</span>
      </div>
      <div class="status-indicator" id="statusIndicator">
        <span class="status-dot"></span>
        <span class="status-text">Active</span>
      </div>
    </header>

    <!-- Onboarding View (shown if not configured) -->
    <section id="onboarding" class="view">
      <div class="onboarding-step" data-step="1">
        <div class="welcome-icon">
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="welcome-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#6366F1"/>
                <stop offset="100%" style="stop-color:#8B5CF6"/>
              </linearGradient>
            </defs>
            <circle cx="32" cy="32" r="30" fill="#252532"/>
            <path fill="url(#welcome-gradient)" d="M46 12c-4-3-10-2-14 3L17 35c-2 2.5-3 5.5-2.5 8.5l1.5 7c.5 2.5 3 4.5 6 4.5h3l22-22c6-6 7-16 1-23z"/>
            <path fill="#FFFFFF" opacity="0.85" d="M39 22c-3-3-8-4-12-1.5l-8 8c-1 1-1.5 2.5-.5 3.5l5 5c1 1 2.5 1 3.5 0l11-11c2.5-2.5 3-6.5 1-10z"/>
            <circle cx="43" cy="15" r="2.5" fill="#FFFFFF" opacity="0.7"/>
          </svg>
        </div>
        <h2>Welcome to Plume</h2>
        <p>Craft replies that resonate with your audience.</p>
        <button class="btn-primary" id="startSetup">Get Started</button>
      </div>

      <div class="onboarding-step hidden" data-step="2">
        <h3>Connect Your AI</h3>
        <p>Plume runs 100% in your browser. Add your API key:</p>
        <div class="provider-select">
          <button class="provider-btn selected" data-provider="openai">
            <span class="provider-icon">
              <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.8956zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"/>
              </svg>
            </span>
            OpenAI
          </button>
          <button class="provider-btn" data-provider="anthropic">
            <span class="provider-icon">
              <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path d="M17.304 3.541h-3.672l6.696 16.918h3.672l-6.696-16.918zm-10.608 0l-6.696 16.918h3.78l1.344-3.492h6.468l1.344 3.492h3.78l-6.696-16.918h-3.324zm-.144 10.362l2.016-5.229 2.016 5.229h-4.032z"/>
              </svg>
            </span>
            Anthropic
          </button>
          <button class="provider-btn" data-provider="groq">
            <span class="provider-icon">
              <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </span>
            Groq
          </button>
        </div>
        <div class="api-input-container">
          <input type="password" id="apiKeyInput" placeholder="Paste your API key" autocomplete="off" />
          <button class="btn-icon" id="toggleKeyVisibility" title="Toggle visibility">
            <svg class="eye-open" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <svg class="eye-closed hidden" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
              <line x1="1" y1="1" x2="23" y2="23"/>
            </svg>
          </button>
        </div>
        <p class="api-hint">Your key is stored locally and never sent to our servers.</p>
        <button class="btn-primary" id="saveApiKey">Continue</button>
      </div>

      <div class="onboarding-step hidden" data-step="3">
        <h3>Your Expertise</h3>
        <p>What topics do you engage with?</p>
        <div class="tag-cloud" id="expertiseTags">
          <button class="tag" data-tag="software">Software Dev</button>
          <button class="tag" data-tag="blockchain">Blockchain</button>
          <button class="tag" data-tag="defi">DeFi</button>
          <button class="tag" data-tag="ai">AI/ML</button>
          <button class="tag" data-tag="startups">Startups</button>
          <button class="tag" data-tag="finance">Finance</button>
          <button class="tag" data-tag="design">Design</button>
          <button class="tag" data-tag="crypto">Crypto</button>
          <button class="tag" data-tag="sports">Sports</button>
          <button class="tag" data-tag="gaming">Gaming</button>
        </div>
        <div class="custom-tag-input">
          <input type="text" id="customTagInput" placeholder="Add custom topic..." maxlength="30" />
          <button class="btn-icon" id="addCustomTag" title="Add tag">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <button class="btn-primary" id="continueToStyle">Continue</button>
      </div>

      <div class="onboarding-step hidden" data-step="4">
        <h3>Your Voice</h3>
        <div class="style-option">
          <label>Communication Style</label>
          <div class="style-buttons" id="styleButtons">
            <button class="style-btn" data-style="professional">Professional</button>
            <button class="style-btn selected" data-style="casual">Casual</button>
            <button class="style-btn" data-style="witty">Witty</button>
            <button class="style-btn" data-style="thoughtful">Thoughtful</button>
            <button class="style-btn" data-style="provocative">Provocative</button>
          </div>
        </div>
        <div class="style-option">
          <label>Tone</label>
          <div class="slider-container">
            <span>Friendly</span>
            <input type="range" id="toneSlider" min="0" max="100" value="50" />
            <span>Authoritative</span>
          </div>
        </div>
        <div class="style-option">
          <label>Response Length</label>
          <div class="length-buttons" id="lengthButtons">
            <button class="length-btn" data-length="concise">Concise</button>
            <button class="length-btn selected" data-length="medium">Medium</button>
            <button class="length-btn" data-length="detailed">Detailed</button>
          </div>
        </div>
        <button class="btn-primary" id="completeSetup">Start Using Plume</button>
      </div>
    </section>

    <!-- Main Dashboard View -->
    <section id="dashboard" class="view hidden">
      <div class="toggle-container">
        <span>Plume Active</span>
        <label class="toggle">
          <input type="checkbox" id="enableToggle" checked />
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-value" id="repliesGenerated">0</span>
          <span class="stat-label">Replies Today</span>
        </div>
        <div class="stat-card">
          <span class="stat-value" id="tweetsAnalyzed">0</span>
          <span class="stat-label">Tweets Analyzed</span>
        </div>
      </div>

      <div class="quick-settings">
        <h4>Quick Settings</h4>
        <div class="setting-row">
          <span>Current Style</span>
          <button class="chip" id="currentStyle">Casual</button>
        </div>
        <div class="setting-row">
          <span>AI Provider</span>
          <button class="chip" id="currentProvider">OpenAI</button>
        </div>
      </div>

      <button class="btn-secondary" id="openSettings">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
        Settings
      </button>
    </section>

    <!-- Settings View -->
    <section id="settings" class="view hidden">
      <div class="settings-header">
        <button class="btn-back" id="backToDashboard">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h3>Settings</h3>
      </div>

      <div class="settings-section">
        <h4>AI Configuration</h4>
        <div class="provider-select-inline">
          <select id="providerSelect">
            <option value="openai">OpenAI (GPT-4o-mini)</option>
            <option value="anthropic">Anthropic (Claude 3.5)</option>
            <option value="groq">Groq (Llama 3.1)</option>
          </select>
        </div>
        <div class="api-key-display">
          <input type="password" id="apiKeyDisplay" readonly />
          <button class="btn-icon" id="changeApiKey" title="Edit API key">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="settings-section">
        <h4>Your Profile</h4>
        <div class="editable-tags" id="editableTags">
          <!-- Populated by JS -->
        </div>
        <div class="style-edit">
          <select id="styleSelect">
            <option value="professional">Professional</option>
            <option value="casual">Casual</option>
            <option value="witty">Witty</option>
            <option value="thoughtful">Thoughtful</option>
            <option value="provocative">Provocative</option>
          </select>
        </div>
      </div>

      <div class="settings-section">
        <h4>Behavior</h4>
        <label class="checkbox-row">
          <input type="checkbox" id="autoShowSuggestions" checked />
          <span>Auto-show suggestions on reply click</span>
        </label>
        <label class="checkbox-row">
          <input type="checkbox" id="includeEmojis" />
          <span>Include emojis in suggestions</span>
        </label>
        <label class="checkbox-row">
          <input type="checkbox" id="addHashtags" />
          <span>Suggest relevant hashtags</span>
        </label>
      </div>

      <div class="settings-footer">
        <button class="btn-danger" id="resetExtension">Reset All Data</button>
        <span class="version">Plume v1.0.0</span>
      </div>
    </section>

    <!-- API Key Edit Modal -->
    <div class="modal-overlay hidden" id="apiKeyModal">
      <div class="modal">
        <h3>Update API Key</h3>
        <div class="api-input-container">
          <input type="password" id="newApiKeyInput" placeholder="Enter new API key" autocomplete="off" />
          <button class="btn-icon" id="toggleNewKeyVisibility" title="Toggle visibility">
            <svg class="eye-open" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <svg class="eye-closed hidden" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
              <line x1="1" y1="1" x2="23" y2="23"/>
            </svg>
          </button>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" id="cancelApiKey">Cancel</button>
          <button class="btn-primary" id="saveNewApiKey">Save</button>
        </div>
      </div>
    </div>
  </div>
  <script src="popup.js" type="module"></script>
</body>
</html>
